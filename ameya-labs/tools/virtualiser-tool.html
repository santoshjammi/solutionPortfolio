<!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/WebApplication">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vagrantfile Generator | Virtual Machine Configuration Tool | Ameya Labs</title>
    <meta name="title" content="Vagrantfile Generator | Virtual Machine Configuration Tool | Ameya Labs" />
    <meta name="description" content="Generate Vagrantfiles for local development environments. Configure VMs with custom CPU, memory, networking, and provisioning scripts. Perfect for DevOps and development teams. Free online tool." />
    <meta name="keywords" content="Vagrantfile generator, virtual machine configuration, Vagrant automation, development environment setup, VM provisioning, DevOps tools, infrastructure as code, local development, virtualbox configuration, development workflow, coding environment, software development tools, DevOps automation, Vagrant box, virtual machine setup, development infrastructure, Ruby on Rails development, Node.js environment, Python development, Java development, PHP development, Docker alternative, local development server" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Vagrantfile Generator | Virtual Machine Configuration Tool | Ameya Labs" />
    <meta property="og:description" content="Generate Vagrantfiles for local development environments. Configure VMs with custom CPU, memory, networking, and provisioning scripts. Perfect for DevOps and development teams." />
    <meta property="og:image" content="https://ameyalabs.com/AmeyaLogo12.png" />
    <meta property="og:url" content="https://ameyalabs.com/tools/virtualiser-tool.html" />
    <meta property="og:site_name" content="Ameya Labs" />
    <meta property="og:locale" content="en_US" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content="Vagrantfile Generator | Virtual Machine Configuration Tool" />
    <meta property="twitter:description" content="Generate Vagrantfiles for local development environments. Configure VMs with custom CPU, memory, networking, and provisioning scripts." />
    <meta property="twitter:image" content="https://ameyalabs.com/AmeyaLogo12.png" />
    <meta property="twitter:site" content="@AmeyaLabs" />
    <meta property="twitter:creator" content="@AmeyaLabs" />

    <!-- Additional SEO Meta Tags -->
    <meta name="author" content="Ameya Labs" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="7 days" />
    <!-- Theme color with fallback support -->
    <meta name="theme-color" content="#6C4BFF" media="(prefers-color-scheme: light)" />
    <meta name="theme-color" content="#071226" media="(prefers-color-scheme: dark)" />
    <meta name="msapplication-TileColor" content="#071226" />
    <meta name="application-name" content="Vagrantfile Generator - Ameya Labs" />
    <meta name="apple-mobile-web-app-title" content="Vagrantfile Generator" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="category" content="Developer Tools, DevOps, Infrastructure" />
    <meta name="coverage" content="Worldwide" />
    <meta name="distribution" content="Global" />
    <meta name="rating" content="General" />
    <meta name="target" content="developers, devops engineers, system administrators" />

    <!-- Canonical URL -->
    <link rel="canonical" href="https://ameyalabs.com/tools/virtualiser-tool.html" />

    <!-- Structured Data - WebApplication Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Vagrantfile Generator",
      "alternateName": "Virtual Machine Configuration Tool",
      "description": "Generate Vagrantfiles for local development environments with customizable VM configurations, networking, and provisioning scripts. Perfect for DevOps teams and developers.",
      "url": "https://ameyalabs.com/tools/virtualiser-tool.html",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Web Browser",
      "browserRequirements": "Modern web browser with JavaScript enabled",
      "softwareVersion": "1.0",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD",
        "availability": "https://schema.org/InStock",
        "validFrom": "2025-01-01"
      },
      "creator": {
        "@type": "Organization",
        "name": "Ameya Labs",
        "url": "https://ameyalabs.com",
        "logo": "https://ameyalabs.com/AmeyaLogo12.png",
        "sameAs": [
          "https://ameyalabs.com"
        ]
      },
      "provider": {
        "@type": "Organization",
        "name": "Ameya Labs",
        "url": "https://ameyalabs.com"
      },
      "featureList": [
        "Vagrantfile generation",
        "VM configuration customization",
        "CPU and memory settings",
        "Network configuration",
        "Provisioning scripts",
        "Development environment setup",
        "Multi-platform support",
        "Infrastructure as Code"
      ],
      "screenshot": "https://ameyalabs.com/AmeyaLogo12.png",
      "datePublished": "2025-09-20",
      "dateModified": "2025-09-20",
      "inLanguage": "en-US",
      "isAccessibleForFree": true,
      "license": "https://opensource.org/licenses/MIT"
    }
    </script>

    <!-- Structured Data - BreadcrumbList -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://ameyalabs.com"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Developer Tools",
          "item": "https://ameyalabs.com#tools"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "Vagrantfile Generator",
          "item": "https://ameyalabs.com/tools/virtualiser-tool.html"
        }
      ]
    }
    </script>

    <!-- Structured Data - SoftwareApplication -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Vagrantfile Generator",
      "description": "Free online tool to generate Vagrantfiles for virtual machine configuration and development environments",
      "url": "https://ameyalabs.com/tools/virtualiser-tool.html",
      "applicationCategory": "DeveloperApplication",
      "operatingSystem": "Web Browser",
      "softwareVersion": "1.0",
      "fileSize": "N/A",
      "downloadUrl": "https://ameyalabs.com/tools/virtualiser-tool.html",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "author": {
        "@type": "Organization",
        "name": "Ameya Labs"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Ameya Labs"
      },
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "5.0",
        "ratingCount": "1"
      }
    }
    </script>

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        :root {
            --am-navy: #071226;
            --am-electric: #6C4BFF;
            --am-accent: #4F46E5;
            --am-light: #f8fafc;
            --am-gray: #64748b;
        }
        .ameya-navy { color: var(--am-navy); }
        .ameya-electric { color: var(--am-electric); }
        .ameya-accent { color: var(--am-accent); }
        .ameya-light { background-color: var(--am-light); }
        .ameya-gray { color: var(--am-gray); }
        .bg-ameya-navy { background-color: var(--am-navy); }
        .bg-ameya-electric { background-color: var(--am-electric); }
        .bg-ameya-accent { background-color: var(--am-accent); }
        .border-ameya-electric { border-color: var(--am-electric); }
        .text-ameya-navy { color: var(--am-navy); }
        .text-ameya-electric { color: var(--am-electric); }
        .text-ameya-accent { color: var(--am-accent); }
        .text-ameya-gray { color: var(--am-gray); }
        .code-editor {
            background-color: #1e1e1e;
            color: #d4d4d4;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: 'Courier New', Courier, monospace;
            white-space: pre-wrap;
            min-height: 200px;
            overflow-x: auto;
            text-align: left;
        }
    </style>
</head>
<body class="bg-ameya-light min-h-screen">

    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-ameya-gray/20">
        <div class="max-w-6xl mx-auto px-6 sm:px-8 lg:px-10 py-4">
            <div class="flex items-center justify-between">
                <a href="../index.html" class="flex items-center space-x-3">
                    <img src="../AmeyaLogo12.png" alt="Ameya Labs Logo" class="h-8 w-auto">
                    <span class="text-xl font-bold text-ameya-navy">Ameya Labs</span>
                </a>
                <a href="../index.html#tools" class="text-ameya-electric hover:text-ameya-accent font-medium transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Back to Tools
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex items-center justify-center min-h-screen p-4 pt-8">
        <article class="bg-white p-8 rounded-xl shadow-lg w-full max-w-2xl space-y-6 text-center border border-ameya-gray/20">
            <header>
                <h1 class="text-3xl font-bold text-ameya-electric">Vagrantfile Generator</h1>
                <p class="text-ameya-gray mt-2">
                    Generate a basic Vagrantfile for your local development environment with customizable VM configurations.
                </p>
            </header>

            <!-- SEO Content Section -->
            <section class="text-left bg-ameya-light/50 p-4 rounded-lg border-l-4 border-ameya-electric">
                <h2 class="text-xl font-semibold text-ameya-navy mb-3">What is Vagrant?</h2>
                <p class="text-ameya-gray mb-3">
                    Vagrant is an open-source tool for building and maintaining portable virtual development environments.
                    It simplifies the setup of development environments by providing a single configuration file (Vagrantfile)
                    that defines everything needed to run your application.
                </p>
                <h3 class="text-lg font-medium text-ameya-navy mb-2">Benefits of Using Vagrant:</h3>
                <ul class="text-ameya-gray space-y-1 text-sm">
                    <li>• <strong>Consistency:</strong> Same environment across all team members</li>
                    <li>• <strong>Isolation:</strong> Keep your host system clean</li>
                    <li>• <strong>Reproducibility:</strong> Recreate environments instantly</li>
                    <li>• <strong>Portability:</strong> Works on Windows, macOS, and Linux</li>
                    <li>• <strong>Version Control:</strong> Vagrantfiles can be committed to Git</li>
                </ul>
            </section>

            <!-- Configuration Form -->
            <section aria-labelledby="config-form">
                <h2 id="config-form" class="text-2xl font-semibold text-ameya-navy mb-4">VM Configuration</h2>
                <form class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-left">
                        <div class="md:col-span-2">
                            <label for="os-select" class="block text-sm font-medium text-ameya-navy">Operating System</label>
                            <select id="os-select" class="mt-1 block w-full px-4 py-2 bg-ameya-light border border-ameya-gray/30 rounded-md focus:ring-2 focus:ring-ameya-electric focus:border-ameya-electric text-ameya-navy" aria-describedby="os-help">
                                <option value="ubuntu">Ubuntu (Default)</option>
                                <option value="centos">CentOS/RHEL</option>
                                <option value="fedora">Fedora</option>
                                <option value="debian">Debian</option>
                                <option value="kali">Kali Linux</option>
                                <option value="windows">Windows</option>
                                <option value="opensuse">openSUSE</option>
                                <option value="alpine">Alpine Linux</option>
                            </select>
                            <p id="os-help" class="mt-1 text-xs text-ameya-gray">Select the operating system for your virtual machine. This affects package managers and default configurations.</p>
                        </div>

                        <!-- AI Package Resolution -->
                        <div class="md:col-span-2 bg-gradient-to-r from-ameya-electric/10 to-ameya-accent/10 p-4 rounded-lg border border-ameya-electric/20">
                            <div class="flex items-center space-x-3 mb-3">
                                <input type="checkbox" id="ai-assist" class="w-4 h-4 text-ameya-electric bg-ameya-light border-ameya-gray/30 rounded focus:ring-ameya-electric focus:ring-2">
                                <label for="ai-assist" class="text-sm font-medium text-ameya-navy flex items-center">
                                    <span class="mr-2">🤖</span>
                                    Enable AI Package Resolution
                                </label>
                            </div>
                            <div id="api-key-section" class="hidden space-y-2">
                                <label for="openai-key" class="block text-xs font-medium text-ameya-navy">OpenAI API Key</label>
                                <input type="password" id="openai-key" placeholder="sk-..." class="block w-full px-3 py-2 text-xs bg-white border border-ameya-gray/30 rounded-md focus:ring-2 focus:ring-ameya-electric focus:border-ameya-electric" aria-describedby="api-help">
                                <p id="api-help" class="text-xs text-ameya-gray/60">Your API key is stored locally in your browser and never sent to our servers. Used only for package name resolution. Keys are saved locally for convenience.</p>
                            </div>
                            <p class="text-xs text-ameya-gray/70 mt-2">
                                AI will help resolve package names across different operating systems. Example: "python development tools" → "python3-dev" (Ubuntu) or "python3-devel" (CentOS)
                            </p>
                        </div>

                        <div>
                            <label for="box" class="block text-sm font-medium text-ameya-navy">Vagrant Box & Applications</label>
                            <input type="text" id="box" value="ubuntu/focal64, python3.9, openjdk-11-jdk" placeholder="e.g., ubuntu/focal64, python3.9, openjdk-11-jdk" class="mt-1 block w-full px-4 py-2 bg-ameya-light border border-ameya-gray/30 rounded-md focus:ring-2 focus:ring-ameya-electric focus:border-ameya-electric text-ameya-navy placeholder-ameya-gray/60" aria-describedby="box-help">
                            <p id="box-help" class="mt-1 text-xs text-ameya-gray">Enter the base box name, followed by a comma-separated list of applications. Popular boxes: ubuntu/focal64, centos/7, fedora/35-cloud-base, kalilinux/rolling. With AI enabled, you can use natural language like "python development tools" or "web development stack".</p>
                        </div>

                        <div>
                            <label for="cpus" class="block text-sm font-medium text-ameya-navy">CPUs</label>
                            <input type="number" id="cpus" value="1" min="1" class="mt-1 block w-full px-4 py-2 bg-ameya-light border border-ameya-gray/30 rounded-md focus:ring-2 focus:ring-ameya-electric focus:border-ameya-electric text-ameya-navy" aria-describedby="cpus-help">
                            <p id="cpus-help" class="mt-1 text-xs text-ameya-gray">Number of CPU cores to allocate to the VM.</p>
                        </div>

                        <div>
                            <label for="memory" class="block text-sm font-medium text-ameya-navy">Memory (MB)</label>
                            <input type="number" id="memory" value="1024" min="256" class="mt-1 block w-full px-4 py-2 bg-ameya-light border border-ameya-gray/30 rounded-md focus:ring-2 focus:ring-ameya-electric focus:border-ameya-electric text-ameya-navy" aria-describedby="memory-help">
                            <p id="memory-help" class="mt-1 text-xs text-ameya-gray">Amount of RAM to allocate to the VM.</p>
                        </div>

                        <div>
                            <label for="hostname" class="block text-sm font-medium text-ameya-navy">Hostname</label>
                            <input type="text" id="hostname" value="dev-server" class="mt-1 block w-full px-4 py-2 bg-ameya-light border border-ameya-gray/30 rounded-md focus:ring-2 focus:ring-ameya-electric focus:border-ameya-electric text-ameya-navy" aria-describedby="hostname-help">
                            <p id="hostname-help" class="mt-1 text-xs text-ameya-gray">The hostname for your virtual machine.</p>
                        </div>
                    </div>

                    <div class="flex justify-center">
                        <button type="button" id="generate-button" class="px-8 py-3 bg-ameya-electric hover:bg-ameya-accent text-white font-semibold rounded-md shadow-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-ameya-electric focus:ring-offset-2 transform hover:scale-105">
                            Generate Vagrantfile
                        </button>
                    </div>
                </form>
            </section>

            <!-- Usage Instructions -->
            <section class="text-left bg-ameya-light/50 p-4 rounded-lg border-l-4 border-ameya-electric">
                <h2 class="text-xl font-semibold text-ameya-navy mb-3">How to Use Your Vagrantfile</h2>
                <ol class="text-ameya-gray space-y-2 text-sm list-decimal list-inside">
                    <li><strong>Save the Vagrantfile:</strong> Copy the generated code and save it as "Vagrantfile" in your project directory.</li>
                    <li><strong>Start the VM:</strong> Run <code class="bg-white px-1 py-0.5 rounded text-xs font-mono">vagrant up</code> in your terminal.</li>
                    <li><strong>Connect to the VM:</strong> Use <code class="bg-white px-1 py-0.5 rounded text-xs font-mono">vagrant ssh</code> to access your virtual machine.</li>
                    <li><strong>Stop the VM:</strong> Run <code class="bg-white px-1 py-0.5 rounded text-xs font-mono">vagrant halt</code> when you're done.</li>
                    <li><strong>Clean up:</strong> Use <code class="bg-white px-1 py-0.5 rounded text-xs font-mono">vagrant destroy</code> to remove the VM completely.</li>
                </ol>
            </section>

            <!-- OpenAI Integration Section -->
            <section class="text-left bg-gradient-to-r from-ameya-light to-ameya-electric/10 p-4 rounded-lg border-l-4 border-ameya-electric">
                <h2 class="text-xl font-semibold text-ameya-navy mb-3">🤖 Advanced: AI-Powered Vagrantfile Generation</h2>
                <p class="text-ameya-gray mb-3">
                    For complex development environments, consider integrating OpenAI's GPT models to generate sophisticated Vagrantfiles based on natural language descriptions.
                </p>
                <div class="bg-white/50 p-3 rounded-md border border-ameya-gray/20">
                    <h3 class="text-lg font-medium text-ameya-navy mb-2">Benefits of OpenAI Integration:</h3>
                    <ul class="text-ameya-gray space-y-1 text-sm">
                        <li>• <strong>Natural Language Input:</strong> Describe your environment in plain English</li>
                        <li>• <strong>Complex Configurations:</strong> Multi-service setups, networking, security</li>
                        <li>• <strong>Best Practices:</strong> AI-suggested optimizations and modern patterns</li>
                        <li>• <strong>Learning Tool:</strong> Understand Vagrant concepts through AI explanations</li>
                    </ul>
                </div>
                <div class="mt-3 text-sm text-ameya-gray">
                    <strong>Note:</strong> OpenAI integration requires an API key and incurs usage costs. Your key is stored locally in your browser only. Consider the security implications and usage costs for your use case.
                </div>
            </section>

            <!-- Generated Vagrantfile Output -->
            <section aria-labelledby="output-section">
                <h2 id="output-section" class="text-2xl font-semibold text-ameya-navy mb-4">Generated Vagrantfile</h2>
                <div id="output-container" class="bg-ameya-light border border-ameya-gray/30 rounded-md p-4 hidden">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-medium text-ameya-navy">Vagrantfile</h3>
                        <button id="copy-button" class="px-4 py-2 bg-ameya-electric hover:bg-ameya-accent text-white text-sm font-medium rounded-md transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-ameya-electric focus:ring-offset-2">
                            Copy to Clipboard
                        </button>
                    </div>
                    <pre id="vagrantfile-output" class="bg-white border border-ameya-gray/20 rounded-md p-4 overflow-x-auto text-sm text-ameya-navy font-mono whitespace-pre-wrap"></pre>
                </div>
                <div id="qr-container" class="mt-6 hidden">
                    <h3 class="text-lg font-medium text-ameya-navy mb-2">QR Code - Share This Tool</h3>
                    <p class="text-sm text-ameya-gray mb-2">Scan to share the Vagrantfile Generator tool with others</p>
                    <div class="flex justify-center">
                        <div id="qrcode" class="bg-white p-4 rounded-md border border-ameya-gray/20"></div>
                    </div>
                </div>
            </section>
            </div>
    </div>

    <script>
        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // OS-specific provisioning scripts
            const provisioningScripts = {
            ubuntu: (apps) => `# Update package list and upgrade system
sudo apt-get update
sudo apt-get upgrade -y

# Install essential build tools and utilities
sudo apt-get install -y build-essential curl wget git unzip software-properties-common

# Install user-specified applications
${apps.length > 0 ? `sudo apt-get install -y ${apps.join(' ')}` : '# No additional applications specified'}

# Configure system settings
echo "Configuring system settings..."
sudo timedatectl set-timezone UTC

echo "Provisioning complete. Ubuntu environment ready for development."`,

            debian: (apps) => `# Update package list and upgrade system
sudo apt-get update
sudo apt-get upgrade -y

# Install essential build tools and utilities
sudo apt-get install -y build-essential curl wget git unzip apt-transport-https

# Install user-specified applications
${apps.length > 0 ? `sudo apt-get install -y ${apps.join(' ')}` : '# No additional applications specified'}

# Configure system settings
echo "Configuring system settings..."
sudo timedatectl set-timezone UTC

echo "Provisioning complete. Debian environment ready for development."`,

            centos: (apps) => `# Update package list and upgrade system
sudo yum update -y

# Install essential build tools and utilities
sudo yum install -y gcc gcc-c++ make curl wget git unzip yum-utils

# Install EPEL repository for additional packages
sudo yum install -y epel-release

# Install user-specified applications
${apps.length > 0 ? `sudo yum install -y ${apps.join(' ')}` : '# No additional applications specified'}

# Configure system settings
echo "Configuring system settings..."
sudo timedatectl set-timezone UTC

echo "Provisioning complete. CentOS environment ready for development."`,

            fedora: (apps) => `# Update package list and upgrade system
sudo dnf update -y

# Install essential build tools and utilities
sudo dnf install -y gcc gcc-c++ make curl wget git unzip

# Install user-specified applications
${apps.length > 0 ? `sudo dnf install -y ${apps.join(' ')}` : '# No additional applications specified'}

# Configure system settings
echo "Configuring system settings..."
sudo timedatectl set-timezone UTC

echo "Provisioning complete. Fedora environment ready for development."`,

            kali: (apps) => `# Update package list and upgrade system
sudo apt-get update
sudo apt-get upgrade -y

# Install essential build tools and utilities
sudo apt-get install -y build-essential curl wget git unzip kali-linux-default

# Install user-specified applications
${apps.length > 0 ? `sudo apt-get install -y ${apps.join(' ')}` : '# No additional applications specified'}

# Configure system settings
echo "Configuring system settings..."
sudo timedatectl set-timezone UTC

echo "Provisioning complete. Kali Linux environment ready for development and security testing."`,

            windows: (apps) => `# Install Chocolatey package manager
if (!(Get-Command choco -ErrorAction SilentlyContinue)) {
    Set-ExecutionPolicy Bypass -Scope Process -Force
    [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072
    iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))
}

# Install essential tools
choco install -y git curl wget

# Install user-specified applications
${apps.length > 0 ? `choco install -y ${apps.join(' ')}` : '# No additional applications specified'}

# Configure system settings
Write-Host "Configuring system settings..."
Set-TimeZone -Id "UTC"

Write-Host "Provisioning complete. Windows environment ready for development."`,

            opensuse: (apps) => `# Update package list and upgrade system
sudo zypper refresh
sudo zypper update -y

# Install essential build tools and utilities
sudo zypper install -y gcc gcc-c++ make curl wget git unzip

# Install user-specified applications
${apps.length > 0 ? `sudo zypper install -y ${apps.join(' ')}` : '# No additional applications specified'}

# Configure system settings
echo "Configuring system settings..."
sudo timedatectl set-timezone UTC

echo "Provisioning complete. openSUSE environment ready for development."`,

            alpine: (apps) => `# Update package list and upgrade system
sudo apk update
sudo apk upgrade

# Install essential build tools and utilities
sudo apk add build-base curl wget git unzip

# Install user-specified applications
${apps.length > 0 ? `sudo apk add ${apps.join(' ')}` : '# No additional applications specified'}

# Configure system settings
echo "Configuring system settings..."
sudo setup-timezone -z UTC

echo "Provisioning complete. Alpine Linux environment ready for development."`
        };

        // OS-specific box recommendations
        const osBoxes = {
            ubuntu: 'ubuntu/focal64',
            debian: 'debian/bullseye64',
            centos: 'centos/7',
            fedora: 'fedora/35-cloud-base',
            kali: 'kalilinux/rolling',
            windows: 'gusztavvargadr/windows-10',
            opensuse: 'opensuse/Leap-15.3.x86_64',
            alpine: 'generic/alpine38'
        };

        // Auto-populate box field based on OS selection
        document.getElementById('os-select').addEventListener('change', (e) => {
            const selectedOS = e.target.value;
            const boxInput = document.getElementById('box');
            const recommendedBox = osBoxes[selectedOS];

            if (recommendedBox && boxInput.value === 'ubuntu/focal64, python3.9, openjdk-11-jdk') {
                // Only auto-populate if it's still the default Ubuntu value
                boxInput.value = `${recommendedBox}, python3.9, openjdk-11-jdk`;
            }
        });

        // AI Assistance Toggle
        document.getElementById('ai-assist').addEventListener('change', (e) => {
            const apiSection = document.getElementById('api-key-section');
            if (e.target.checked) {
                apiSection.classList.remove('hidden');
                // Load saved API key from localStorage
                const savedKey = localStorage.getItem('openai-api-key');
                if (savedKey) {
                    document.getElementById('openai-key').value = savedKey;
                }
            } else {
                apiSection.classList.add('hidden');
            }
        });

        // Save API key to localStorage when changed
        document.getElementById('openai-key').addEventListener('input', (e) => {
            localStorage.setItem('openai-api-key', e.target.value);
        });

        // OpenAI Package Resolution Function
        async function resolvePackagesWithAI(userPackages, targetOS, apiKey) {
            const prompt = `Convert these software package requests to the correct package names for ${targetOS}:

User requested packages: ${userPackages.join(', ')}

Please provide the exact package names that should be installed on ${targetOS}. Consider:
- Package naming conventions for ${targetOS}
- Development headers/libraries when applicable
- Common package groups or meta-packages
- Version-specific packages if needed

Return only a comma-separated list of package names, no explanations.`;

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [{
                            role: 'user',
                            content: prompt
                        }],
                        max_tokens: 200,
                        temperature: 0.1
                    })
                });

                if (!response.ok) {
                    throw new Error(`OpenAI API error: ${response.status}`);
                }

                const data = await response.json();
                const resolvedPackages = data.choices[0].message.content.trim().split(',').map(pkg => pkg.trim()).filter(pkg => pkg);
                return resolvedPackages;
            } catch (error) {
                console.error('OpenAI API error:', error);
                throw error;
            }
        }

        document.getElementById('generate-button').addEventListener('click', async () => {
            const boxesAndApps = document.getElementById('box').value.split(',').map(item => item.trim()).filter(item => item !== '');
            const box = boxesAndApps[0];
            let apps = boxesAndApps.slice(1);
            const cpus = document.getElementById('cpus').value;
            const memory = document.getElementById('memory').value;
            const hostname = document.getElementById('hostname').value;
            const selectedOS = document.getElementById('os-select').value;
            const useAI = document.getElementById('ai-assist').checked;
            const apiKey = document.getElementById('openai-key').value;

            // Show loading state
            const generateBtn = document.getElementById('generate-button');
            const originalText = generateBtn.textContent;
            generateBtn.textContent = useAI ? '🤖 Resolving packages...' : 'Generating...';
            generateBtn.disabled = true;

            try {
                if (!box) {
                    document.getElementById('vagrantfile-output').textContent = '# Please enter a Vagrant box.';
                    document.getElementById('output-container').classList.remove('hidden');
                    return;
                }

                const provisionScript = provisioningScripts[selectedOS] ? provisioningScripts[selectedOS](apps) : provisioningScripts.ubuntu(apps);

            const vagrantfileContent = `# -*- mode: ruby -*-
# vi: set ft=ruby :

# Vagrantfile - Generated by Ameya Labs Vagrantfile Generator
# Generated on: ${new Date().toISOString().split('T')[0]}
# Following 21st.dev modern development practices

Vagrant.configure("2") do |config|
  # Base box configuration
  config.vm.box = "${box}"
  config.vm.hostname = "${hostname}"

  # VirtualBox provider configuration
  config.vm.provider "virtualbox" do |vb|
    # VM name in VirtualBox GUI
    vb.name = "${hostname}"

    # Hardware resources
    vb.memory = "${memory}"
    vb.cpus = "${cpus}"

    # Display settings
    vb.gui = false

    # Performance optimizations
    vb.customize ["modifyvm", :id, "--ioapic", "on"]
    vb.customize ["modifyvm", :id, "--largepages", "on"]
    vb.customize ["modifyvm", :id, "--pae", "on"]
  end

  # Network configuration
  # Forwarded ports for common development services
  config.vm.network "forwarded_port", guest: 80, host: 8080, auto_correct: true
  config.vm.network "forwarded_port", guest: 443, host: 8443, auto_correct: true
  config.vm.network "forwarded_port", guest: 3000, host: 3000, auto_correct: true  # Node.js/React
  config.vm.network "forwarded_port", guest: 5000, host: 5000, auto_correct: true  # Flask/Django
  config.vm.network "forwarded_port", guest: 5432, host: 5432, auto_correct: true  # PostgreSQL

  # Private network for inter-VM communication
  config.vm.network "private_network", type: "dhcp"

  # Public network (bridged) - uncomment if needed
  # config.vm.network "public_network"

  # Shared folders
  # Sync the project directory
  config.vm.synced_folder ".", "/vagrant", type: "virtualbox"

  # Additional shared folders (uncomment and modify as needed)
  # config.vm.synced_folder "../data", "/data", type: "virtualbox"
  # config.vm.synced_folder "../logs", "/logs", type: "virtualbox"

  # SSH configuration
  config.ssh.forward_agent = true
  config.ssh.forward_x11 = false

  # Provisioning
  config.vm.provision "shell", inline: <<-SHELL
${provisionScript}
  SHELL

  # Optional: Use Ansible for more complex provisioning
  # config.vm.provision "ansible" do |ansible|
  #   ansible.playbook = "playbook.yml"
  # end

  # VM customization
  config.vm.post_up_message = <<-MESSAGE
  ╔══════════════════════════════════════════════════════════════╗
  ║                      VM Provisioned Successfully!           ║
  ║                                                              ║
  ║  VM Hostname: ${hostname}
  ║  Memory: ${memory}MB
  ║  CPUs: ${cpus}
  ║                                                              ║
  ║  Access your VM:                                             ║
  ║    • SSH: vagrant ssh                                        ║
  ║    • Web: http://localhost:8080                             ║
  ║    • App: http://localhost:3000 (if running)                ║
  ║                                                              ║
  ║  Useful commands:                                           ║
  ║    • vagrant halt     - Stop the VM                         ║
  ║    • vagrant destroy  - Delete the VM                       ║
  ║    • vagrant suspend  - Pause the VM                        ║
  ║    • vagrant resume   - Resume the VM                       ║
  ║                                                              ║
  ╚══════════════════════════════════════════════════════════════╝
  MESSAGE
end`;            document.getElementById('vagrantfile-output').textContent = vagrantfileContent;
            document.getElementById('output-container').classList.remove('hidden');

            // Generate QR Code with URL to the tool
            const qrContainer = document.getElementById('qrcode');
            qrContainer.innerHTML = ''; // Clear previous QR code
            const currentUrl = window.location.href;
            new QRCode(qrContainer, {
                text: currentUrl,
                width: 128,
                height: 128,
                colorDark: "#071226",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
            document.getElementById('qr-container').classList.remove('hidden');
            } catch (error) {
                console.error('Error generating Vagrantfile:', error);
                document.getElementById('vagrantfile-output').textContent = '# Error generating Vagrantfile. Please check your inputs.';
                document.getElementById('output-container').classList.remove('hidden');
            } finally {
                // Reset button state
                generateBtn.textContent = originalText;
                generateBtn.disabled = false;
            }
        });

        // Copy to clipboard functionality
        document.getElementById('copy-button').addEventListener('click', () => {
            const output = document.getElementById('vagrantfile-output');
            navigator.clipboard.writeText(output.textContent).then(() => {
                const button = document.getElementById('copy-button');
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.classList.add('bg-green-500', 'hover:bg-green-600');
                button.classList.remove('bg-ameya-electric', 'hover:bg-ameya-accent');
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('bg-green-500', 'hover:bg-green-600');
                    button.classList.add('bg-ameya-electric', 'hover:bg-ameya-accent');
                }, 2000);
            });
        });
        }); // End of DOMContentLoaded
    </script>

    <!-- QRCode.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

</body>
</html>
